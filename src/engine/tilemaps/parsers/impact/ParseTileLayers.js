var LayerData = require('../../mapdata/LayerData');var Tile = require('../../Tile');var ParseTileLayers = function (json, insertNull){    var tileLayers = [];    for (var i = 0; i < json.layer.length; i++)    {        var layer = json.layer[i];        var layerData = new LayerData({            name: layer.name,            width: layer.width,            height: layer.height,            tileWidth: layer.tilesize,            tileHeight: layer.tilesize,            visible: layer.visible === 1        });        var row = [];        var tileGrid = [];        for (var y = 0; y < layer.data.length; y++)        {            for (var x = 0; x < layer.data[y].length; x++)            {                var index = layer.data[y][x] - 1;                var tile;                if (index > -1)                {                    tile = new Tile(layerData, index, x, y, layer.tilesize, layer.tilesize);                }                else                {                    tile = insertNull                        ? null                        : new Tile(layerData, -1, x, y, layer.tilesize, layer.tilesize);                }                row.push(tile);            }            tileGrid.push(row);            row = [];        }        layerData.data = tileGrid;        tileLayers.push(layerData);    }    return tileLayers;};module.exports = ParseTileLayers;